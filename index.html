<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dom Wczasowy "Bezludzie"</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
        .spinner-border {
            width: 3rem;
            height: 3rem;
        }
        .content {
            display: none;
        }
        .info {
            margin-top: 20px;
        }
        .cabin-image {
            max-width: 100%;
            height: auto;
        }
    </style>
    <script>
        async function fetchData() {
            try {
                const response = await fetch('https://docs.google.com/spreadsheets/d/17nzVj38yKCpDRVUAYTqBpUnOShxu6oYquWXPbYhQEQ0/pub?gid=0&single=true&output=csv');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.text();
                const rows = data.split('\n').slice(1).map(row => row.split(','));

                const params = new URLSearchParams(window.location.search);
                const code = params.get('code');

                const reservation = rows.find(row => row[0].trim() === code.trim());

                if (reservation) {
                    document.getElementById('checkin-code').innerText = `${reservation[1].trim()}`;
                    document.getElementById('checkout-code').innerText = `${reservation[2].trim()}`;
                } else {
                    document.getElementById('content').innerText = 'Invalid reservation code.';
                }
            } catch (error) {
                document.getElementById('content').innerText = 'Error fetching data. Please try again later.';
                console.error('Fetch error:', error);
            } finally {
                document.getElementById('spinner').style.display = 'none';
                document.getElementById('content').style.display = 'block';
            }
        }

        window.onload = fetchData;
    </script>
</head>
<body class="container mt-5">
    <div class="text-center">
        <h1 class="mb-4">Dom Wczasowy "Bezludzie"</h1>
        <img src="domek.png" alt="Cabin Image" class="cabin-image mb-4">
    </div>
    <div id="spinner" class="text-center">
        <div class="spinner-border text-primary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <div id="content" class="content">
        
        <div class="info">
            <p><strong>ðŸ‡µðŸ‡±</strong>
            <p><strong>Kod do zameldowania: <p id="checkin-code" class="lead"></p></strong> - Kod jest waÅ¼ny w godzinach 15:00 - 22:00 (JeÅ›li przyjazd bÄ™dzie pÃ³Åºniej, proszÄ™ o kontakt przez wiadomoÅ›Ä‡ Airbnb)</p>
            <p><strong>Kod do wymeldowania: <p id="checkout-code" class="lead"></p></strong> - Kod jest waÅ¼ny w godzinach 6:00 - 11:00 (JeÅ›li chcÄ… PaÅ„stwa wyjechaÄ‡ wczeÅ›niej, proszÄ™ o kontakt przez wiadomoÅ›Ä‡ Airbnb)</p>
            <br>
            <p><strong>ðŸ‡¬ðŸ‡§</strong>
            <p><strong>Check-in code: <p id="checkin-code" class="lead"></p></strong> - Check-in code is valid between 15:00 and 22:00 (If you arrive later, please contact me via Airbnb message)</p>
            <p><strong>Check-out code: <p id="checkout-code" class="lead"></p></strong> - Check-out code is valid between 6:00 and 11:00 (If you wish to leave earlier, please contact me via Airbnb message)</p>
        </div>
    </div>
</body>
</html>
